# 概览

## 词法分析的主要任务

从左至右逐个字符地对源程序进行扫描，按照源语言的词法规则识别出一个个的单词符号，把识别出来的标识符存入符号表中，并产生由于词法分析的记号序列。

# 词法分析程序与语法分析程序的关系

## 三种形式

- 词法分析程序作为独立的一遍
- 词法分析程序作为语法分析程序的子程序
- 词法分析程序与语法分析程序作为协同程序

### 词法分析程序作为独立的一遍

词法分析程序的输出放入一个中间文件（放在内存中），与语法分析程序从该文件取得它的输入。

### 词法分析程序作为语法分析程序的子程序

每需要一个新的记号调用一次词法分析程序。有利于提高编译程序的效率。

### 词法分析程序与语法分析程序作为协同程序

把它们安排成交替执行的协同程序。

## 词法分析程序相对于语法分析程序独立的优点

- 简化设计
- 改进编译程序的效率
- 加强编译程序的可移植性

# 词法分析程序的输入与输出

## 词法分析程序实现的三种方法

- 利用词法分析程序生成器，从基于正规表达式的规范说明自动生成词法分析程序。
- 利用传统的系统程序设计语言来编写词法分析程序。
- 利用汇编语言编写词法分析程序。

## 输入缓冲区

### 任务

读入字符串

### 超前扫描的目的

为了得到某一单词符号的准确性质，只从该单词本身所含有的字符不能做出判定。

### 两个指针

单词符号开始指针和向前指针

## 词法分析程序的输出

### 任务

输出字符串对应的记号序列形式

### 记号(token)

某一类单词符号的类别编码，代表构成规则相同的单词的集合。

在上下文无关文法中，记号是终结符号。

### 模式(pattern)

某一类单词符号的构成规则

### 单词(lexeme)

某一类单词符号中的一个实例

# 记号的描述和识别

正则表达式和正规文法是描述模式的重要工具。

任何一个正规表达式都可以找到一个正规文法，使这个正规文法所产生的语言恰好是该正则表达式所表示的语言。

## 词法和语法

### 词法

描述语言的标识符、常数、运算符和标点符号的记号的文法。

### 语法

借助于记号来描述语言的结构的文法。

## 记号的文法

### 标识符

以由字母打头的、由字母或数字组成的符号串为例子。正则表达式如下：

```
letter(letter|digit)*
```

### 常数

#### 整数

正则表达式如下：

```
(digit)*
```

#### 无符号数

正则表达书如下：

~~~
(digit)*(.(digit)+)?(E(+|-)?(digit)*)?
~~~

### 运算符

~~~
<|<=|=|<>|>=|>
~~~

# 词法分析程序的设计与实现

## 构建词法分析程序的步骤

1. 根据语言说明写出各种单词符号的正规文法
2. 根据正规文法构建状态转换图（有限的方向图）
3. 根据状态转换图构造词法分析程序

## 输出形式

### 记号以二元式的形式输出

<记号, 属性>